function initAccordions(){document.querySelectorAll(".accordion-item-header").forEach((e=>{e.addEventListener("click",(t=>{const a=document.querySelector(".accordion-item-header.active");a&&a!==e&&(a.classList.toggle("active"),a.nextElementSibling.style.maxHeight=0),e.classList.toggle("active");const o=e.nextElementSibling;e.classList.contains("active")?o.style.maxHeight=o.scrollHeight+"px":o.style.maxHeight=0}))}))}function initModal(){const e=document.querySelector(".modal"),t=e.querySelector(".modal__overlay");document.querySelectorAll(".place:not(.booked)").forEach((t=>{t.addEventListener("click",(t=>{e.classList.add("active"),e.setAttribute("data-day",t.target.getAttribute("data-date")),e.setAttribute("data-place-num",t.target.getAttribute("data-place-num")),e.setAttribute("data-time",t.target.getAttribute("data-time"))}))})),t.addEventListener("click",(()=>{e.classList.remove("active")}));const a=document.querySelector(".modal--success");a.querySelector(".modal__overlay").addEventListener("click",(()=>{a.classList.remove("active")}))}console.log("Load script.js");var app={};function initTabs(){let e=document.querySelectorAll(".header-tab"),t=document.querySelector(".header"),a=document.querySelectorAll(".tabcontent");function o(e){for(let t=e;t<a.length;t++)a[t].classList.remove("show"),a[t].classList.add("hide")}function c(){for(let t=0;t<e.length;t++)e[t].classList.remove("active"),e[t].classList.add("disable")}function i(t){e[t].classList.contains("disable")&&(e[t].classList.remove("disable"),e[t].classList.add("active"))}o(1),t.addEventListener("click",(function(t){let n=t.target;if(n&&n.classList.contains("header-tab"))for(let t=0;t<e.length;t++)if(n==e[t]){o(0),a[s=t].classList.contains("hide")&&(a[s].classList.remove("hide"),a[s].classList.add("show")),c(),i(t);break}var s}))}app.global={init:function(){const e=app.global.setDate();let t=app.global.createData(e);app.global.checkBooked(t),app.global.createTabs(t),app.global.blockOutOfDate(),initTabs(),initAccordions(),initModal(),app.global.bookPlace(t)},setDate:function(){const e=new Date,t=[];for(let a=0;a<7;a++){const o=new Date(e);o.setDate(e.getDate()+a);const c=o.getDate(),i=o.getMonth()+1,n=`${c.toString().padStart(2,"0")}.${i.toString().padStart(2,"0")}`;t.push(n)}return t},createData:function(e){let t=[];for(let a=0,o=e.length;a<o;a++){let o=[];for(let t=0;t<6;t++){let c,i=10+2*t,n=e[a].replace(".","")+i,s=[];c=10==i||20==i?20:25;for(let e=0;e<c;e++){let t={placeNum:e+1,placeBooked:!1,placeByer:""};s.push(t)}let l={sessionID:n,sessionTime:`${i}:00`,sessionPlaces:s};o.push(l)}let c={date:e[a],sessions:o};t.push(c)}return t},createTabs:function(e){const t=document.querySelector(".container .info .header"),a=document.querySelector(".container .info"),o=document.querySelectorAll(".tabcontent");let c="",i="";for(let t=0,a=e.length;t<a;t++)checked="",checked=0==t?"active":"dusabled",c+=`\n                <div class="header-tab ${checked}">${e[t].date}</div>\n            `,i+=`\n                <div class="tabcontent">\n                    <div class="description">\n                        <h3>Tickets for ${e[t].date}</h3>\n                        ${app.global.createTimes(e[t].sessions,e[t].date)}\n                    </div>\n                </div>\n            `;t.innerHTML="",o.forEach((e=>e.remove())),t.insertAdjacentHTML("afterbegin",c),a.insertAdjacentHTML("beforeend",i)},createTimes:function(e,t){let a="";for(let o=0,c=e.length;o<c;o++)a+=`\n                <div class="accordion" data-time="${e[o].sessionTime.split(":")[0]}">\n                    <div class="accordion-item">\n                        <div class="accordion-item-header">\n                            ${e[o].sessionTime}\n                        </div>\n                        <div class="accordion-item-body">\n                            <div class="accordion-item-body-content">\n                                ${app.global.createPlaces(e[o].sessionPlaces,t,e[o].sessionTime)}    \n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;return a},createPlaces:function(e,t,a,o){let c="";for(let o=0,i=e.length;o<i;o++)booked="",e[o].placeBooked?booked="booked":booked="",c+=`\n                <div class="place ${booked}" id="place-${e[o].placeNum}" data-date="${t}" data-time="${a}" data-place-num="${e[o].placeNum}">\n                    ${e[o].placeNum}\n                </div>\n            `;return c},setCookies:function(e,t,a,o){let c=app.global.getCookie("data"),i={date:e,time:t,place:a,name:o};if(void 0===c){let e=[i];document.cookie="data="+JSON.stringify(e)}else{let e=JSON.parse(c);e.push(i),document.cookie="data="+JSON.stringify(e)}},getCookie:function(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},bookPlace:function(e){const t=document.querySelector(".modal:not(.modal-success)"),a=t.querySelector("#modal-btn"),o=t.querySelector("input"),c=document.querySelector(".modal--success");a.addEventListener("click",(()=>{let e=t.getAttribute("data-day"),a=t.getAttribute("data-time"),i=t.getAttribute("data-place-num"),n=o.value;o.value="",t.classList.remove("active"),app.global.setCookies(e,a,i,n),app.global.init(),c.classList.add("active"),setTimeout((()=>{c.classList.remove("active")}),2e3)}))},checkBooked:function(e){let t=app.global.getCookie("data");if(void 0!==t){let a=JSON.parse(t);a.length>0&&a.forEach((t=>{e.forEach((e=>{e.date==t.date&&e.sessions.forEach((e=>{e.sessionTime==t.time&&e.sessionPlaces.forEach((e=>{e.placeNum==t.place&&(e.placeBooked=!0,e.placeByer=t.name)}))}))}))}))}},blockOutOfDate:function(e){const t=(new Date).getHours();document.querySelector(".tabcontent").querySelectorAll(".accordion").forEach((e=>{e.getAttribute("data-time")<=t&&e.classList.add("out-of-time")}))}},app.global.init();
//# sourceMappingURL=all.js.map